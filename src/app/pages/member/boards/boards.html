<div class="mb-10">
  <h1 class="text-4xl font-bold text-gray-800">Task Boards</h1>
  <p class="text-xl text-gray-600 mt-3">Track your work progress</p>
</div>

<div class="bg-white rounded-2xl shadow-lg p-8 mb-10">
  <div class="flex justify-between items-center mb-8">
    <h2 class="text-2xl font-semibold">Website Redesign Board</h2>
    <div class="flex space-x-4">
      <button class="px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-md transition-colors">
        <i class="fas fa-filter mr-3"></i> Filter
      </button>
      <button class="px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-md transition-colors">
        <i class="fas fa-cog mr-3"></i> Settings
      </button>
    </div>
  </div>
  
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- To Do Column -->
    <div 
      cdkDropList
      id="todoList"
      [cdkDropListData]="(todoTasks$ | async) || []"
      (cdkDropListDropped)="drop($event)"
      class="bg-gray-50 rounded-xl p-6 board-column">
      <div class="flex justify-between items-center mb-6">
        <h3 class="font-semibold text-lg text-gray-700">To Do</h3>
        <span class="bg-gray-200 text-gray-700 text-sm font-semibold px-3 py-1 rounded-full">
          {{ (todoTasks$ | async)?.length || 0 }}
        </span>
      </div>
      <div class="space-y-5" *ngIf="todoTasks$ | async as todoTasks">
        <div 
          *ngFor="let task of todoTasks"
          cdkDrag
          class="task-card bg-white rounded-xl p-5 shadow border border-gray-200">
          <div class="flex justify-between">
            <h4 class="font-semibold text-lg">{{ task.title }}</h4>
            <div class="flex space-x-2">
              <span class="h-4 w-4 rounded-full bg-gray-300 shadow-sm"></span>
            </div>
          </div>
          <p class="text-base text-gray-600 mt-3">{{ task.description }}</p>
          <div class="flex justify-between items-center mt-4">
            <span class="text-sm" [ngClass]="{'text-red-500': isOverdue(task.dueDate), 'text-gray-500': !isOverdue(task.dueDate)}">
              Due {{ formatDate(task.dueDate) }}
            </span>
            <div class="flex -space-x-2">
              <div class="h-8 w-8 rounded-full bg-indigo-100 border-2 border-white flex items-center justify-center shadow-sm">
                <span class="text-sm text-indigo-600">{{ currentUser.name.substring(0, 1) }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- In Progress Column -->
    <div 
      cdkDropList
      id="inProgressList"
      [cdkDropListData]="(inProgressTasks$ | async) || []"
      (cdkDropListDropped)="drop($event)"
      class="bg-blue-50 rounded-xl p-6 board-column">
      <div class="flex justify-between items-center mb-6">
        <h3 class="font-semibold text-lg text-blue-700">In Progress</h3>
        <span class="bg-blue-200 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">
          {{ (inProgressTasks$ | async)?.length || 0 }}
        </span>
      </div>
      <div class="space-y-5" *ngIf="inProgressTasks$ | async as inProgressTasks">
        <div 
          *ngFor="let task of inProgressTasks"
          cdkDrag
          class="task-card bg-white rounded-xl p-5 shadow border border-blue-200">
          <div class="flex justify-between">
            <h4 class="font-semibold text-lg">{{ task.title }}</h4>
            <div class="flex space-x-2">
              <span class="h-4 w-4 rounded-full bg-blue-500 shadow-sm"></span>
            </div>
          </div>
          <p class="text-base text-gray-600 mt-3">{{ task.description }}</p>
          <div class="flex justify-between items-center mt-4">
            <span class="text-sm text-blue-600">Due {{ formatDate(task.dueDate) }}</span>
            <div class="flex -space-x-2">
              <div class="h-8 w-8 rounded-full bg-indigo-100 border-2 border-white flex items-center justify-center shadow-sm">
                <span class="text-sm text-indigo-600">{{ currentUser.name.substring(0, 1) }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Review Column -->
    <div 
      cdkDropList
      id="reviewList"
      [cdkDropListData]="(reviewTasks$ | async) || []"
      (cdkDropListDropped)="drop($event)"
      class="bg-yellow-50 rounded-xl p-6 board-column">
      <div class="flex justify-between items-center mb-6">
        <h3 class="font-semibold text-lg text-yellow-700">Review</h3>
        <span class="bg-yellow-200 text-yellow-700 text-sm font-semibold px-3 py-1 rounded-full">
          {{ (reviewTasks$ | async)?.length || 0 }}
        </span>
      </div>
      <div class="space-y-5" *ngIf="reviewTasks$ | async as reviewTasks">
        <div 
          *ngFor="let task of reviewTasks"
          cdkDrag
          class="task-card bg-white rounded-xl p-5 shadow border border-yellow-200">
          <div class="flex justify-between">
            <h4 class="font-semibold text-lg">{{ task.title }}</h4>
            <div class="flex space-x-2">
              <span class="h-4 w-4 rounded-full bg-yellow-500 shadow-sm"></span>
            </div>
          </div>
          <p class="text-base text-gray-600 mt-3">{{ task.description }}</p>
          <div class="flex justify-between items-center mt-4">
            <span class="text-sm text-yellow-600">Due {{ formatDate(task.dueDate) }}</span>
            <div class="flex -space-x-2">
              <div class="h-8 w-8 rounded-full bg-indigo-100 border-2 border-white flex items-center justify-center shadow-sm">
                <span class="text-sm text-indigo-600">{{ currentUser.name.substring(0, 1) }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Done Column -->
    <div 
      cdkDropList
      id="doneList"
      [cdkDropListData]="(doneTasks$ | async) || []"
      (cdkDropListDropped)="drop($event)"
      class="bg-green-50 rounded-xl p-6 board-column">
      <div class="flex justify-between items-center mb-6">
        <h3 class="font-semibold text-lg text-green-700">Done</h3>
        <span class="bg-green-200 text-green-700 text-sm font-semibold px-3 py-1 rounded-full">
          {{ (doneTasks$ | async)?.length || 0 }}
        </span>
      </div>
      <div class="space-y-5" *ngIf="doneTasks$ | async as doneTasks">
        <div 
          *ngFor="let task of doneTasks"
          cdkDrag
          class="task-card bg-white rounded-xl p-5 shadow border border-green-200">
          <div class="flex justify-between">
            <h4 class="font-semibold text-lg">{{ task.title }}</h4>
            <div class="flex space-x-2">
              <span class="h-4 w-4 rounded-full bg-green-500 shadow-sm"></span>
            </div>
          </div>
          <p class="text-base text-gray-600 mt-3">{{ task.description }}</p>
          <div class="flex justify-between items-center mt-4">
            <span class="text-sm text-green-600">Completed {{ formatDate(task.completionDate || task.dueDate) }}</span>
            <div class="flex -space-x-2">
              <div class="h-8 w-8 rounded-full bg-indigo-100 border-2 border-white flex items-center justify-center shadow-sm">
                <span class="text-sm text-indigo-600">{{ currentUser.name.substring(0, 1) }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="bg-white rounded-2xl shadow-lg p-8">
  <h2 class="text-2xl font-semibold mb-8">Your Other Boards</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let board of otherBoards" class="border border-gray-200 rounded-xl p-8 hover:border-indigo-300 hover:shadow-md transition-all">
      <div class="flex items-center mb-5">
        <div class="h-12 w-12 rounded-xl flex items-center justify-center shadow-md mr-5"
             [ngClass]="'bg-' + board.color + '-100'">
          <i class="fas text-xl" [ngClass]="board.icon + ' text-' + board.color + '-600'"></i>
        </div>
        <h3 class="font-semibold text-lg">{{ board.name }}</h3>
      </div>
      <p class="text-base text-gray-600 mb-6">{{ board.description }}</p>
      <div class="flex justify-between text-base text-gray-500">
        <span>{{ board.tasks }} tasks</span>
        <span>{{ board.members }} members</span>
      </div>
    </div>
  </div>
</div>